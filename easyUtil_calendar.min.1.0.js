/*
 * (c) Copyright 2018 QiYan. All Rights Reserved.
 * **/
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(t):"function"==typeof define?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.easyCalendar=t()}("undefined"!=typeof window?window:void 0,function(){function e(t){if(!(this instanceof e))return new e(t);this.id=t,this.el=document.querySelector("#"+t)}function t(t){if("string"!=typeof t)throw new TypeError('easyCalendar: param "id" must be the type of "string"!');return new e(t).init()}function n(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}return e.prototype={constructor:e,normal_year:[31,28,31,30,31,30,31,31,30,31,30,31],leap_year:[31,29,31,30,31,30,31,31,30,31,30,31],now_date:new Date,out_day_class:"out-day",main_class:"calendar-container",display_class:"display-part",opt_class:"opt-part",today_class:"today-part",input_date:null,switch_right:"drop-right",switch_left:"drop-left",switch_center:"drop-center",timer:500,init:function(){var e=this.now_date.getFullYear(),t=this.now_date.getMonth();this.makeCalendar(e,t)},isLeapYear:function(e){return e%400==0||e%4==0&&e%100!=0},makeCalendar:function(e,t){this.input_date=new Date(e,t,1);var i=document.createDocumentFragment(),s=null,r=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),l=document.createElement("table"),d=document.createElement("thead"),c=document.createElement("tbody"),u=this.input_date.getDay(),h=null,p=1,y=1,m=this.now_date.getDate(),f=this.now_date.getFullYear(),_=this.now_date.getMonth();this.isLeapYear(e)?(s=this.leap_year[t],h=this.normal_year[0!=t?t-1:11]-(u-1)):(s=this.normal_year[t],h=this.normal_year[0!=t?t-1:11]-(u-1)),r.className=this.main_class,a.className=this.display_class,o.className=this.opt_class,a.innerHTML="<span id='"+this.id+"_date-part'>"+n(this.input_date,"yyyy年MM月")+"</span>",o.innerHTML="<button type='button' id='"+this.id+"_previous' class='btn-part'><</button><button type='button' id='"+this.id+"_toToday' class='btn-part'>今天</button><button type='button' id='"+this.id+"_next' class='btn-part'>></button>",d.insertRow(0),d.rows[0].insertCell(0).innerHTML="日",d.rows[0].insertCell(1).innerHTML="一",d.rows[0].insertCell(2).innerHTML="二",d.rows[0].insertCell(3).innerHTML="三",d.rows[0].insertCell(4).innerHTML="四",d.rows[0].insertCell(5).innerHTML="五",d.rows[0].insertCell(6).innerHTML="六";for(var w=0;w<6;w++){c.insertRow(w);for(var v=0;v<7;v++)switch(!0){case 0==w:v<u?(c.rows[w].insertCell(v).innerHTML=h,c.rows[w].cells[v].className=this.out_day_class,h++):(c.rows[w].insertCell(v).innerHTML=y,y++);break;default:y<=s?(c.rows[w].insertCell(v).innerHTML=y,y===m&&t===_&&e===f&&(c.rows[w].cells[v].className=this.today_class),y++):(c.rows[w].insertCell(v).innerHTML=p,c.rows[w].cells[v].className=this.out_day_class,p++)}}arguments[2]&&(l.className=this.switch_left),l.appendChild(d),l.appendChild(c),r.appendChild(a),r.appendChild(o),r.appendChild(l),i.appendChild(r);try{this.removeEvent()}catch(e){}this.el.innerHTML="",this.el.appendChild(i),this.initEvent(),i=null},previous:function(){var e=this.input_date.getFullYear(),t=this.input_date.getMonth()-1;t<0&&(t=11,e-=1),this.makeCalendar(e,t,1)},next:function(){var e=this,t=this.input_date.getFullYear(),n=this.input_date.getMonth()+1;n>11&&(n=0,t+=1),this.el.querySelector("table").className=this.switch_right,setTimeout(function(){e.makeCalendar(t,n)},this.timer)},toTaday:function(){var e=this,t=(new Date).getFullYear(),n=(new Date).getMonth();this.el.querySelector("table").className=this.switch_center,setTimeout(function(){e.makeCalendar(t,n)},this.timer)},initEvent:function(){document.querySelector("#"+this.id+"_previous").addEventListener("click",this.previous.bind(this)),document.querySelector("#"+this.id+"_next").addEventListener("click",this.next.bind(this)),document.querySelector("#"+this.id+"_toToday").addEventListener("click",this.toTaday.bind(this))},removeEvent:function(){document.querySelector("#"+this.id+"_previous").removeEventListener("click",this.previous.bind(this)),document.querySelector("#"+this.id+"_next").removeEventListener("click",this.next.bind(this)),document.querySelector("#"+this.id+"_toToday").removeEventListener("click",this.toTaday.bind(this))}},{create:t}});